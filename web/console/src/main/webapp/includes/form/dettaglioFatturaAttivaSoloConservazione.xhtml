<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:op2web="http://www.openspcoop2.org/web/taglib/jsf">
	<f:loadBundle var="msg" basename="messages" />

 
 		<h:panelGrid id="panelDettaglio2"
					columnClasses="gridContent verticalAlignTop"
					rendered="#{!empty fatturaSelezionata}"
					columns="1" width="100%">

					<!-- Dati Intestazione  -->
					<op2web:fieldset legend="#{msg['fattura.label.intestazione']}" collapsible="false" closed="false" rendered="#{true}">
						<op2web:outputGroup group="#{fatturaSelezionata.datiIntestazione}" />
					</op2web:fieldset>

					<!-- Dati Trasmissione  -->
					<op2web:fieldset legend="#{msg['fattura.label.generale']}" collapsible="false" closed="false" rendered="#{true}">
													
						<c:set var="datiTrasmissione1" value="#{mbean.selectedElement.datiTrasmissione1}" />
							
						<h:panelGrid id="panelGroupOut_#{datiTrasmissione1.id}" styleClass="#{datiTrasmissione1.styleClass}"
							columnClasses="#{datiTrasmissione1.columnClasses}" 
							rendered="#{datiTrasmissione1.rendered}" columns="#{datiTrasmissione1.columns}">
					
							<op2web:output field="#{mbean.selectedElement.nomeFile}" insideGroup="true" />
							<op2web:output field="#{mbean.selectedElement.formatoTrasmissione}" insideGroup="true" />
							<h:graphicImage value="/images/s.gif" width="1" height="1" alt="spacer" />
							
							<op2web:output field="#{mbean.selectedElement.tipoDocumento}" insideGroup="true" />
							<op2web:output field="#{mbean.selectedElement.protocollo}" insideGroup="true" />
							<h:graphicImage value="/images/s.gif" width="1" height="1" alt="spacer" />
							
							<op2web:output field="#{mbean.selectedElement.dipartimento}" insideGroup="true" />
							<op2web:output field="#{mbean.selectedElement.codiceDestinatario}" insideGroup="true" />
							<h:graphicImage value="/images/s.gif" width="1" height="1" alt="spacer" />
						</h:panelGrid>
					</op2web:fieldset>

					<!-- Contenuto Fattura -->
					<op2web:fieldset legend="#{msg['fattura.label.contenuto']}" collapsible="false" closed="false" rendered="#{true}">
						<op2web:outputGroup group="#{fatturaSelezionata.contenutoFattura}" />
						
						<op2web:outputGroup group="#{fatturaSelezionata.causaleFattura}" />
					</op2web:fieldset>

					<!-- Tabella Allegati -->
					<op2web:fieldset legend="#{msg['fattura.label.allegati']}" collapsible="false" closed="false"
						rendered="#{true}">
						<c:set var="metadataAllegato" value="#{fatturaSelezionata.metadataAllegato}" />

						<c:set var="listaAllegati" value="#{fatturaSelezionata.allegati}" />

						<h:outputText id="outNoListaAllegati" value="#{msg['fattura.label.allegati.nodata']}" rendered="#{empty listaAllegati}" />

						<op2web:simpleListView id="tabellaAllegati" rendered="#{not empty listaAllegati}" value="#{listaAllegati}" itemMetadata="#{metadataAllegato}">
						
							<!-- Colonne nome,descrizione,compressione,formato-->
							<op2web:tableColumns nomiColonne="#{'nomeAttachment,descrizioneAttachment,algoritmoCompressione,formatoAttachment'}" />
							
							<!-- Visualizza -->
							<rich:column style="text-align: center;">
								<f:facet name="header">
									<h:outputText value="#{metadataAllegato.attachment.label}" />
								</f:facet>

								<h:panelGroup>
									<h:outputLink value="#{item.attachment.href}" target="_blank" rendered="#{not empty item.attachment.href}">
										<h:graphicImage value="#{item.attachment.image}" width="16" height="16" title="#{item.attachment.title}" />
									</h:outputLink>
								</h:panelGroup>
							</rich:column>
						</op2web:simpleListView>
					</op2web:fieldset>
				</h:panelGrid>
 
    </ui:composition>
